cmake_minimum_required(VERSION 3.16)

project(chess LANGUAGES CXX)

find_package(Qt5 REQUIRED COMPONENTS Core Gui Qml Quick)

# Set the C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})

# Add the Qt resource file for QML files
qt5_add_resources(QRC_FILES resources.qrc)

# Add MOC processing for QObject-based classes
qt5_wrap_cpp(MOC_SOURCES
    Mainwindow.h
    Board.h
    Piece.h
    Pawn.h
    Rook.h
    Knight.h
    Bishop.h
    Queen.h
    King.h
    PiecesModel.h
)

# Add the source files for your project
set(SOURCES
    Main.cpp
    Mainwindow.cpp
    Board.cpp
    Piece.cpp
    Pawn.cpp
    Rook.cpp
    Knight.cpp
    Bishop.cpp
    Queen.cpp
    King.cpp
    PiecesModel.cpp
    ${QRC_FILES}   # Generated from resources.qrc
    ${MOC_SOURCES} # Generated by qt5_wrap_cpp
)

# Add the header files for your project
set(HEADERS
    Mainwindow.h
    Board.h
    Piece.h
    Pawn.h
    Rook.h
    Knight.h
    Bishop.h
    Queen.h
    King.h
    PiecesModel.h
)


# Add the executable
add_executable(${PROJECT_NAME} ${SOURCES} ${HEADERS})

# Link Qt libraries
target_link_libraries(${PROJECT_NAME} Qt5::Core Qt5::Gui Qt5::Qml Qt5::Quick)

# Add install targets (for Linux)
install(TARGETS ${PROJECT_NAME}
    RUNTIME DESTINATION bin
    LIBRARY DESTINATION lib
    ARCHIVE DESTINATION lib
)
